<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ app_name }} — Le futur de la musique</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="nb-app">
    <header>
      <div>
        <h1>NeoBelieve</h1>
        <p>Le futur de la musique, gratuite et sans pub.</p>
      </div>
      <button class="chip" id="devices-btn">Devices</button>
    </header>

    <section class="panel">
      <div class="panel-header">
        <h3>Recherche</h3>
        <div class="panel-actions">
          <input id="search-input" type="text" placeholder="Chercher un titre, un artiste..." />
          <button id="search-btn">Search</button>
        </div>
      </div>
      <div id="search-results" class="list"></div>
    </section>

    <section class="tabs">
      <button class="tab active" data-tab="playlists">Playlists</button>
      <button class="tab" data-tab="downloads">Téléchargements</button>
      <button class="tab" data-tab="history">Derniers joués</button>
      <button class="tab desktop-only" data-tab="lyrics">Lyrics</button>
    </section>

    <section class="panel tab-panel" id="tab-playlists">
      <div class="panel-header">
        <h3>Playlists</h3>
        <div class="panel-actions">
          <input id="playlist-name" type="text" placeholder="Nouvelle playlist" />
          <button id="playlist-create">Créer</button>
        </div>
      </div>
      <div id="playlist-list" class="grid"></div>
    </section>

    <section class="panel tab-panel hidden" id="tab-downloads">
      <div class="panel-header">
        <h3>Téléchargements</h3>
      </div>
      <div id="downloaded-list" class="list"></div>
    </section>

    <section class="panel tab-panel hidden" id="tab-history">
      <div class="panel-header">
        <h3>Derniers joués</h3>
      </div>
      <div id="history-list" class="list"></div>
    </section>
  </div>

  <section class="now-overlay hidden" id="now-overlay">
    <div class="now">
      <button class="close-btn" id="now-close">×</button>
      <div class="cover-wrap">
        <img id="now-cover" src="" alt="cover" />
        <section class="lyrics-overlay hidden" id="lyrics-panel">
          <div class="lyrics-card">
            <div class="lyrics-header">
              <h4>Lyrics</h4>
              <button id="lyrics-close">Fermer</button>
            </div>
            <div class="lyrics-body" id="lyrics-body"></div>
          </div>
        </section>
      </div>
      <div class="meta">
        <div class="status" id="now-status">Prêt</div>
        <h2 id="now-title">Choisis une musique</h2>
        <p id="now-artist">Recherche, playlists, ou téléchargées</p>
        <div class="progress">
          <input id="progress" type="range" min="0" max="100" value="0" />
          <div class="time">
            <span id="current-time">0:00</span>
            <span id="duration">0:00</span>
          </div>
        </div>
        <div class="controls">
          <button id="prev-btn" class="secondary">Prev</button>
          <button id="play-btn">Play</button>
          <button id="next-btn" class="secondary">Next</button>
          <button id="shuffle-btn" class="secondary">Shuffle</button>
          <button id="loop-btn" class="secondary">Loop</button>
          <button id="download-btn" class="secondary">Download</button>
          <button id="lyrics-toggle" class="secondary">Lyrics</button>
          <div class="volume-control">
            <span id="vol-label">80</span>
            <input id="volume" type="range" min="0" max="100" value="80" />
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="panel tab-panel hidden desktop-only" id="tab-lyrics">
    <div class="lyrics-header">
      <h4>Lyrics</h4>
    </div>
    <div class="lyrics-body" id="lyrics-body-desktop"></div>
  </section>

  <section class="queue-drawer hidden" id="queue-drawer">
    <div class="queue drawer-card">
      <div class="drawer-header">
        <h3>Queue</h3>
        <button id="queue-close">Fermer</button>
      </div>
      <div id="queue-list" class="list"></div>
    </div>
  </section>

  <section class="devices-overlay hidden" id="devices-overlay">
    <div class="devices-card">
      <div class="panel-header">
        <h3>Devices</h3>
        <button id="devices-close">Fermer</button>
      </div>
      <div class="panel-actions">
        <input id="device-name" type="text" placeholder="Nom du device" />
        <input id="device-host" type="text" placeholder="IP / Host" />
        <input id="device-port" type="number" placeholder="Port" />
        <button id="device-add">Ajouter</button>
      </div>
      <div id="devices-list" class="list"></div>
    </div>
  </section>

  <section class="picker-overlay hidden" id="playlist-picker">
    <div class="picker-card">
      <div class="panel-header">
        <h3>Ajouter à une playlist</h3>
        <button id="picker-close">Fermer</button>
      </div>
      <div id="picker-list" class="list"></div>
    </div>
  </section>

  <div id="player-bar">
    <div class="track-left">
      <img id="track-cover" src="" alt="cover" />
      <div id="track-info">Aucune lecture</div>
    </div>
    <div class="controls">
      <button id="bar-prev">⟲</button>
      <button id="bar-play">▶</button>
      <button id="bar-next">⟳</button>
      <button id="bar-download">↓</button>
      <button id="bar-queue">Queue</button>
    </div>
    <div class="volume">
      <span id="bar-vol">80</span>
      <input id="bar-volume" type="range" min="0" max="100" value="80" />
    </div>
    <div class="progress-container">
      <span id="bar-current">0:00</span>
      <input id="bar-progress" type="range" min="0" max="100" value="0" />
      <span id="bar-duration">0:00</span>
    </div>
  </div>

  <audio id="audio"></audio>
  <script src="/static/app.js"></script>
</body>
</html>
